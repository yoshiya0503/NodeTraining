{
  "name": "tobi",
  "description": "expressive server-side functional testing with jQuery and jsdom",
  "version": "0.3.2",
  "author": {
    "name": "TJ Holowaychuk",
    "email": "tj@vision-media.ca"
  },
  "keywords": [
    "test",
    "testing",
    "browser",
    "jquery",
    "css"
  ],
  "dependencies": {
    "jsdom": ">= 0.1.21",
    "htmlparser": ">= 1.7.3",
    "should": ">= 0.0.4",
    "qs": ">= 0.1.0"
  },
  "devDependencies": {
    "express": "2.3.x",
    "expresso": ">= 0.0.1",
    "htmlparser": ">= 0.0.1",
    "jsdom": ">= 0.0.1",
    "qs": ">= 0.0.1",
    "should": ">= 0.0.1",
    "connect": ">= 0.0.1"
  },
  "main": "./index.js",
  "engines": {
    "node": ">= 0.4.x < 0.7.0"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/LearnBoost/tobi.git"
  },
  "readme": "\n# Tobi\n\n  Expressive server-side functional testing with jQuery and [jsdom](https://github.com/tmpvar/jsdom).\n\n  Tobi allows you to test your web application as if it were a browser. Interactions with your app are performed via jsdom, htmlparser, and jQuery, in combination with Tobi's Cookie Jar, provides a natural JavaScript API for traversing, manipulating and asserting the DOM, and session based browsing.\n\n## Example\n\nIn the example below, we have an http server or express app `require()`ed, and we simply create new tobi `Browser` for that app to test against. Then we `GET /login`, receiving a response to assert headers, status codes etc, and the `$` jQuery context.\n\nWe can then use regular css selectors to grab the form, we use tobi's `.fill()` method to fill some inputs (supports textareas, checkboxes, radios, etc), then we proceed to submitting the form, again receiving a response and the jQuery context.\n\n    var tobi = require('tobi')\n      , app = require('./my/app')\n      , browser = tobi.createBrowser(app);\n\n    browser.get('/login', function(res, $){\n      $('form')\n        .fill({ username: 'tj', password: 'tobi' })\n        .submit(function(res, $){\n          res.should.have.status(200);\n          res.should.have.header('Content-Length');\n          res.should.have.header('Content-Type', 'text/html; charset=utf-8');\n          $('ul.messages').should.have.one('li', 'Successfully authenticated');\n          browser.get('/login', function(res, $){\n            res.should.have.status(200);\n            $('ul.messages').should.have.one('li', 'Already authenticated');\n            // We are finished testing, close the server\n            app.close();\n          });\n        });\n    });\n\n## Browser\n\nTobi provides the `Browser` object, created via `tobi.createBrowser(app)`, where `app` is a node `http.Server`, so for example Connect or Express apps will work just fine. There is no need to invoke `listen()` as this is handled by Tobi, and requests will be deferred until the server is listening.\n\nAlternatively you may pass a `port` and `host` to `createBrowser()`, for example:\n\n    var browser = tobi.createBrowser(80, 'lb.dev'); \n\n### Evaluate External Resources\n\nTo evaluate script tags simply pass the `{ external: true }` option:\n\n    var browser = tobi.createBrowser(app, { external: true });\n\n### Browser#get()\n\nPerform a `GET` request with optional `options` containing headers, etc:\n\n    browser.get('/login', function(res, $){\n      \n    });\n\nWith options:\n\n    browser.get('/login', { headers: { ... }}, function(res, $){\n      \n    });\n\nAliased as `visit`, and `open`.\n\n### Browser#post()\n\nPerform a `POST` request with optional `options` containing headers, body etc:\n\n    browser.post('/login', function(res, $){\n      \n    });\n\nWith options:\n\n    browser.post('/login', { body: 'foo=bar' }, function(res, $){\n      \n    });\n\n### Browser#back()\n\n`GET` the previous page:\n\n    browser.get('/', function(){\n      // on /\n      browser.get('/foo', function(){\n        // on /foo\n        browser.back(function(){\n          // on /\n        });\n      });\n    });\n\n## Browser locators\n\nLocators are extended extend selectors, the rules are as following:\n\n  - element text\n  - element id\n  - element value\n  - css selector\n\nThese rules apply to all `Browser` related methods such as `click()`, `fill()`, `type()` etc. Provided the following markup:\n\n    <form>\n      <input id=\"form-login\" type=\"submit\" value=\"Login\" />\n    </form>\n\nThe following locators will match the input:\n\n    .click('Login');\n    .click('form-login');\n    .click('input[type=submit]');\n    .click(':submit');\n\n### Browser#click(locator[, fn])\n\nTobi allows you to `click()` `a` elements, `button[type=submit]` elements, and `input[type=submit]` elements in order to submit a form, or request a url.\n\nSubmitting a form:\n\n    browser.click('Login', function(res, $){\n      \n    });\n\nSubmitting with jQuery (no locators):\n\n    $('form :submit').click(function(res, $){\n      \n    });\n\nClicking a link:\n\n    browser.click('Register Account', function(res, $){\n      \n    });\n\nClicking with jQuery (no locators):\n\n    $('a.register', function(res, $){\n      \n    });\n\n### Browser#submit(locator|fn, fn)\n\nSubmit the first form in context:\n\n    browser.submit(function(res, $){\n      \n    });\n\n    browser.submit(function(){\n      \n    });\n\n### Browser#type(locator, str)\n\n\"Type\" the given _str_:\n\n    browser\n      .type('username', 'tj') \n      .type('password', 'foobar');\n\n\n### Browser#{check,uncheck}(locator)\n\nCheck or uncheck the given _locator_:\n\n    browser\n      .check('agreement')\n      .uncheck('agreement');\n\n### Browser#select(locator, options)\n\nSelect the given option or options:\n\n    browser\n      .select('colors', 'Red')\n      .select('colors', ['Red', 'Green']);\n\n### Browser#fill(locator, fields)\n\nFill the given _fields_, supporting all types of inputs. For example we might have the following form:\n\n    <form>\n      <input type=\"text\" name=\"user[name]\" />\n      <input type=\"text\" name=\"user[email]\" />\n      <input type=\"checkbox\" name=\"user[agreement]\" />\n      \n      <select name=\"digest\">\n        <option value=\"none\">Never</option>\n        <option value=\"daily\">Daily</option>\n        <option value=\"weekly\">Weekly</option>\n      </select>\n      \n      <select name=\"favorite-colors\" multiple>\n        <option value=\"red\">Red</option>\n        <option value=\"green\">Green</option>\n        <option value=\"blue\">Blue</option>\n      </select>\n    </form> \n\nWhich can be filled using locators:\n\n    browser\n      .fill({\n          'user[name]': 'tj'\n        , 'user[email]': 'tj@learnboost.com'\n        , 'user[agreement]': true\n        , 'user[digest]': 'Daily'\n        , 'user[favorite-colors]': ['red', 'Green']\n      }).submit(function(){\n        \n      });\n\nWith jQuery:\n\n    $('form')\n      .fill({\n          'user[name]': 'tj'\n        , 'user[favorite-colors]': 'red'\n      }).submit(function(){\n        \n      });\n\n### Browser#text(locator)\n\nReturn text at the given locator. For example if we have the form option somewhere in our markup:\n\n    <option value=\"once\">Once per day</option>\n\nWe can invoke `browser.text('once')` returning \"Once per day\".\n\n### Browser#{context,within}(selector, fn)\n\nAlter the browser context for the duration of the given callback `fn`. For example if you have several forms on a page, an wish to focus on one:\n\n    <div><form id=\"user-search\" method=\"post\" action=\"/search/users\">\n      <input type=\"text\" name=\"query\" />\n    </form></div>\n\n    <div><form id=\"post-search\" method=\"post\" action=\"/search/posts\">\n      <input type=\"text\" name=\"query\" />\n    </form></div>\n\nExample test using contexts:\n\n    browser.get('/search', function(res, $){\n\n      // Global context has 2 forms\n      $('form').should.have.length(2);\n\n      // Focus on the second div\n      browser.within('div:nth-child(2)', function(){\n\n        // We now have one form, and no direct input children\n        $('> form').should.have.length(1);\n        $('> input').should.have.length(0);\n\n        // Focus on the form, we now have a single direct input child\n        browser.within('form', function(){\n          $('> form').should.have.length(0);\n          $('> input').should.have.length(1);\n        });\n\n        // Back to our div focus, we have one form again\n        $('> form').should.have.length(1);\n        $('> input').should.have.length(0);\n\n        // Methods such as .type() etc work with contexts\n        browser\n        .type('query', 'foo bar')\n        .submit(function(res){\n\n        });\n      });\n\n      // Back to global context\n      $('form').should.have.length(2);\n    });\n\n## Assertions\n\nTobi extends the [should.js](http://github.com/visionmedia/should.js) assertion library to provide you with DOM and response related assertion methods.\n\n### Assertion#text(str|regexp)\n\n  Assert element text via regexp or string:\n  \n      elem.should.have.text('foo bar');\n      elem.should.have.text(/^foo/);\n      elem.should.not.have.text('rawr');\n\n  When asserting a descendant's text amongst a heap of elements, we can utilize the `.include` modifier:\n\n      $('*').should.include.text('My Site');\n\n### Assertion#many(selector)\n\n  Assert that one or more of the given selector is present:\n  \n      ul.should.have.many('li');\n\n### Assertion#one(selector)\n\n  Assert that one of the given selector is present:\n  \n      p.should.have.one('input');\n\n### Assertion#attr(key[, val])\n\n  Assert that the given _key_ exists, with optional _val_:\n  \n      p.should.not.have.attr('href');\n      a.should.have.attr('href');\n      a.should.have.attr('href', 'http://learnboost.com');\n\n  Shortcuts are also provided:\n  \n    - id()\n    - title()\n    - href()\n    - alt()\n    - src()\n    - rel()\n    - media()\n    - name()\n    - action()\n    - method()\n    - value()\n    - enabled\n    - disabled\n    - checked\n    - selected\n\nFor example:\n\n      form.should.have.id('user-edit');\n      form.should.have.action('/login');\n      form.should.have.method('post');\n      checkbox.should.be.enabled;\n      checkbox.should.be.disabled;\n      option.should.be.selected;\n      option.should.not.be.selected;\n\n### Assertion#class(name)\n\n  Assert that the element has the given class _name_.\n\n      form.should.have.class('user-edit');\n\n### Assertion#status(code)\n\n  Assert response status code:\n  \n      res.should.have.status(200);\n      res.should.not.have.status(500);\n\n### Assertion#header(field[, val])\n\n  Assert presence of response header _field_ and optional _val_:\n  \n      res.should.have.header('Content-Length');\n      res.should.have.header('Content-Type', 'text/html');\n\n## Testing\n\nInstall the deps:\n\n    $ npm install\n\nand execute:\n\n    $ make test\n\n## WWTD\n\nWhat Would Tobi Do:\n\n![Tobi](http://sphotos.ak.fbcdn.net/hphotos-ak-snc3/hs234.snc3/22173_446973930292_559060292_10921426_7238463_n.jpg)\n\n## License \n\n(The MIT License)\n\nCopyright (c) 2010 LearnBoost &lt;dev@learnboost.com&gt;\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n'Software'), to deal in the Software without restriction, including\nwithout limitation te rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.",
  "readmeFilename": "Readme.md",
  "bugs": {
    "url": "https://github.com/LearnBoost/tobi/issues"
  },
  "_id": "tobi@0.3.2",
  "_from": "tobi@*"
}
